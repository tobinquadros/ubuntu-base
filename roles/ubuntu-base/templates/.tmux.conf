# .tmux.conf

# ==============================================================================
# BINDINGS
# ==============================================================================

# To force a reload of this config file, use <PREFIX>r
unbind-key r
bind-key r source-file $HOME/.tmux.conf

# Set <PREFIX>B to send prefix when using nested tmux sessions
bind-key B send-prefix

# Optional bindings to set current working directory for new panes and windows.
bind-key C new-window -c '#{pane_current_path}' bash
bind-key | split-window -h -c '#{pane_current_path}' bash
bind-key _ split-window -v -c '#{pane_current_path}' bash

# Resize panes similar to vim
bind > resize-pane -L 5
bind < resize-pane -R 5
bind - resize-pane -D 5
bind + resize-pane -U 5

# Allow TMUX copy register to be placed in system clipboard
# set-option -g default-command "reattach-to-user-namespace -l bash"

# Setup 'v' & 'y' for visual yank selections like Vim.
# bind-key -T copy-mode-vi 'v' send-keys -X begin-selection
# bind-key -T copy-mode-vi 'y' send-keys -X copy-pipe-and-cancel "xclip -i -f -selection primary | xclip -i -selection clipboard"

# ==============================================================================
# STATUSBAR & COMMAND PROMPT
# ==============================================================================

# Show session, hostname, shell PID, and window-name on left side of statusbar.
set-option -g status-left-length 100
set-option -g status-left "[#S] #[fg=green]#{pane_pid}"

# Set window list component to center on statusbar.
set-option -g status-justify left

# Show 'year-month-day time' on right side of statusbar.
set-option -g status-right-length 100
set-option -g status-right '#[fg=colour237]%Y-%m-%d %H:%M'

# Statusbar Colors
set-option -g status-bg default
set-option -g status-fg colour237
set-window-option -g window-status-bg default
set-window-option -g window-status-fg colour237
set-window-option -g window-status-attr dim
set-window-option -g window-status-current-bg default
set-window-option -g window-status-current-fg green
set-window-option -g window-status-current-attr dim

# Highlight statusbar when there is new activity.
set-window-option -g monitor-activity on
set-option -g visual-activity on

# Statusbar color for activity and messages.
set-option -g message-bg black
set-option -g message-fg white
set-option -g message-attr bright

# Listen to alerts from all windows.
set-option -g bell-action any

# Override EDITOR="vim" for command prompt
set-option -g status-keys emacs

# ==============================================================================
# PANE & WINDOW
# ==============================================================================

# Allow enhanced mouse functionality
set-option -g mouse on

# Use vim keybindings in copy mode.
set-window-option -g mode-keys vi

# Don't wait for escape sequences during input
set-option -g escape-time 0

# Set the pane history buffer size
set-option -g history-limit 4096

# Set the terminal mode to 256color mode
set-option -g default-terminal "screen-256color"

# Pane Colors
set-option -g pane-border-bg default
set-option -g pane-border-fg colour234
set-option -g pane-active-border-bg default
set-option -g pane-active-border-fg green

# Start window and pane numbering at 1
set-option -g base-index 1
set-window-option -g pane-base-index 1

# Re-number windows when one is closed.
set-option -g renumber-windows on

# Set pane numbering display in ms
set-option -g display-panes-time 5000

# ==============================================================================
# PLUGINS
# ==============================================================================

# Supports `github_username/repo`, type <PREFIX> + I to install.
set -g @plugin "tmux-plugins/tpm"
set -g @plugin "tmux-plugins/tmux-yank"
set -g @shell_mode "vi"

# Initializes TMUX plugin manager.
# Keep these lines at the very bottom of tmux.conf.
run $HOME/.tmux/plugins/tpm/tpm
run-shell -b 'echo "TMUX config reloaded, press enter"'
